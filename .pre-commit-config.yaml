repos:
- repo: local
  hooks:
    # Run the ruff linter and formatter using just command
    - id: ruff
      name: ruff
      description: "Format Python code using ruff format via just command"
      entry: just format
      language: system
      types_or: [python, pyi]
      pass_filenames: false
      stages: [pre-commit]

    # Verify MkDocs build
    - id: mkdocs
      name: mkdocs
      description: "Verify MkDocs documentation builds without errors"
      entry: uv run mkdocs build --strict
      language: system
      pass_filenames: false
      stages: [pre-commit]

    # Check for missing migrations
    - id: alembic
      name: Alembic
      description: "Check for missing migrations"
      entry: just migrate check
      language: system
      pass_filenames: false
      stages: [pre-commit]

# Mandatory internal hooks
- repo: https://github.com/uktrade/github-standards
  rev: v0.0.18  # update periodically with pre-commit autoupdate
  hooks:
    - id: run-security-scan
      verbose: false
    - id: run-personal-data-scan
      verbose: false
    - id: validate-security-scan
      verbose: false
